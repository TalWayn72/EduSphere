# EduSphere NATS JetStream Server Configuration
# SI-7: TLS and authentication required in production

# Listen on all interfaces
host: "0.0.0.0"
port: 4222

# HTTP monitoring port (localhost only)
http_port: 8222

# JetStream configuration
jetstream {
  store_dir: "/data/jetstream"
  max_memory_store: 1GB
  max_file_store: 10GB
}

# TLS configuration (enabled when cert files exist)
# Uncomment for production deployment:
# tls {
#   cert_file: "/etc/nats/tls/server.crt"
#   key_file:  "/etc/nats/tls/server.key"
#   ca_file:   "/etc/nats/tls/ca.crt"
#   verify:    true
#   timeout:   2
# }

# Authorization (NKey-based in production)
# Uncomment and replace <NKEY_PUBLIC> with actual public keys:
# authorization {
#   users = [
#     {
#       nkey: <SUBGRAPH_NKEY_PUBLIC>
#       permissions: {
#         publish: {
#           allow: ["content.>", "annotation.>", "agent.>", "user.>"]
#         }
#         subscribe: {
#           allow: ["content.>", "annotation.>", "agent.>", "user.>", "_INBOX.>"]
#         }
#       }
#     }
#   ]
# }

# Logging
log_time: true
debug: false
trace: false
