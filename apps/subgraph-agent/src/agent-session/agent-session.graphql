enum SessionStatus {
  ACTIVE
  COMPLETED
  FAILED
  CANCELLED
}

type AgentSession @key(fields: "id") {
  id: ID!
  userId: ID!
  user: User!
  agentType: String!
  status: SessionStatus!
  metadata: JSON
  messages: [AgentMessage!]!
  createdAt: String!
  completedAt: String
}

type User @key(fields: "id") {
  id: ID!
}

scalar JSON

extend type Query {
  agentSession(id: ID!): AgentSession
  agentSessionsByUser(userId: ID!, limit: Int = 20): [AgentSession!]!
  activeAgentSessions(userId: ID!): [AgentSession!]!
}

extend type Mutation {
  createAgentSession(input: CreateAgentSessionInput!): AgentSession!
  updateAgentSession(id: ID!, input: UpdateAgentSessionInput!): AgentSession!
  completeAgentSession(id: ID!): AgentSession!
  cancelAgentSession(id: ID!): AgentSession!
}

input CreateAgentSessionInput {
  userId: ID!
  agentType: String!
  metadata: JSON
}

input UpdateAgentSessionInput {
  status: SessionStatus
  metadata: JSON
}
